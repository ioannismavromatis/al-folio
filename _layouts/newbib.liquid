---
---
<!-- _layouts/bib.html -->
      <div class="row">
        <div class="col-sm-2 {% if entry.preview %}preview{% else %}abbr{% endif %}">
          {%- if entry.preview -%}
            {% if entry.preview contains '://' -%}
            <img class="preview z-depth-1 rounded" src="{{ entry.preview }}">
            {%- else -%}
            <img class="preview z-depth-1 rounded" src="{{ entry.preview | prepend: '/assets/img/publication_preview/' | relative_url }}">
            {%- endif -%}
          {%- elsif entry.abbr -%}
            {%- if site.data.venues[entry.abbr] -%}
              {%- assign venue_style = nil -%}
              {%- if site.data.venues[entry.abbr].color != blank -%}
                {%- assign venue_style = site.data.venues[entry.abbr].color | prepend: 'style="background-color:' | append: '"' -%}
              {%- endif -%}
              <abbr class="badge" {% if venue_style %}{{venue_style}}{% endif %}><a href="{{site.data.venues[entry.abbr].url}}">{{entry.abbr}}</a></abbr>
            {%- else -%}
              <abbr class="badge">{{entry.abbr}}</abbr>
            {%- endif -%}
          {%- endif -%}
        </div>

        <!-- Entry bib key -->
        <div id="{{entry.key}}" class="col-sm-10">
        {% if entry.type == "thesis" -%}
          <div style="font-size: 20px;" class="title">{{entry.title}}</div>
          <div class="author">
            {%- for author in entry.author_array -%}
              {%- assign author_is_self = false -%}
              {%- if author.last == site.scholar.last_name%}
                {%- if site.scholar.first_name contains author.first -%}
                  {%- assign author_is_self = true -%}
                {%- endif -%}
              {%- endif -%}
              {%- if author_is_self %}
                <b>{{author.last}}, {{author.first}}</b>
              {%- else -%}
                {{author.last}}, {{author.first}}
              {%- endif -%}
            {%- endfor -%}
          </div>
          <div class="periodical">
            <em>{{entry.booktitle}}, </em>{{entry.year}}
          </div>
        {%- else %}
          <!-- Title -->
          <div style="font-size: 20px;" class="title">{{entry.title}}</div>
          <!-- Author -->
          <div class="author">
            {% assign author_array_size = entry.author_array | size %}

            {% assign author_array_limit = author_array_size %}
            {%- if site.max_author_limit and author_array_size > site.max_author_limit %}
              {% assign author_array_limit = site.max_author_limit %}
            {% endif %}

            {%- for author in entry.author_array limit: author_array_limit -%}
              {%- assign author_is_self = false -%}
              {%- assign author_last_name = author.last | remove: "¶" | remove: "&" | remove: "*" | remove: "†" | remove: "^" -%}
              {%- if site.scholar.last_name contains author_last_name -%}
                {%- if site.scholar.first_name contains author.first -%}
                  {%- assign author_is_self = true -%}
                {%- endif -%}
              {%- endif -%}
              {%- assign coauthor_url = nil -%}
              {%- if site.data.coauthors[author_last_name] -%}
                {%- for coauthor in site.data.coauthors[author_last_name] -%}
                  {%- if coauthor.firstname contains author.first -%}
                    {%- assign coauthor_url = coauthor.url -%}
                    {%- break -%}
                  {%- endif -%}
                {%- endfor -%}
              {%- endif -%}

              {%- if forloop.length > 1 -%}
                {%- if forloop.first == false -%},&nbsp;{%- endif -%}
                {%- if forloop.last and author_array_limit == author_array_size -%}and&nbsp;{%- endif -%}
              {%- endif -%}
              {%- if author_is_self -%}
                <em>{{author.first}} {{author.last}}</em>
              {%- else -%}
                {%- if coauthor_url -%}
                  <a href="{{coauthor_url}}">{{author.first}} {{author.last}}</a>
                {%- else -%}
                  {{author.first}} {{author.last}}
                {%- endif -%}
              {%- endif -%}
            {%- endfor -%}
            {%- assign more_authors = author_array_size | minus: author_array_limit -%}

            {%- assign more_authors_hide = more_authors | append: " more author" -%}
            {%- if more_authors > 0 -%}
              {%- if more_authors > 1 -%}
                {%- assign more_authors_hide = more_authors_hide | append: "s" -%}
              {%- endif -%}
              {%- assign more_authors_show = '' -%}
              {%- for author in entry.author_array offset: author_array_limit -%}
                {%- assign more_authors_show = more_authors_show | append: author.first | append: " " | append: author.last -%}
                {%- unless forloop.last -%}
                  {%- assign more_authors_show = more_authors_show | append: ", " -%}
                {%- endunless -%}
              {%- endfor -%}
              , and
              <span
                  class="more-authors"
                  title="click to view {{more_authors_hide}}"
                  onclick="
                    var element = $(this);
                    element.attr('title', '');
                    var more_authors_text = element.text() == '{{more_authors_hide}}' ? '{{more_authors_show}}' : '{{more_authors_hide}}';
                    var cursorPosition = 0;
                    var textAdder = setInterval(function(){
                      element.text(more_authors_text.substring(0, cursorPosition + 1));
                      if (++cursorPosition == more_authors_text.length){
                        clearInterval(textAdder);
                      }
                  }, '{{site.more_authors_animation_delay}}');
                  "
              >{{more_authors_hide}}</span>
            {%- endif -%}
          </div>

          <!-- Journal/Book title and date -->
          {% if entry.type == "article" -%}
            {%- capture entrytype -%}<em>{{entry.journal}},</em>{%- endcapture -%}
          {%- elsif entry.type == "inproceedings" -%}
            {%- capture entrytype -%}<em>In {{entry.booktitle}}</em>, {%- endcapture -%}
          {%- elsif entry.type == "book" -%}
            {%- capture entrytype -%}<em>{{entry.booktitle}}, {{entry.publisher}}</em>, {%- endcapture -%}
          {%- elsif entry.type == "patent" -%}
            {%- capture entrytype -%}<em>{{entry.location}}, {{entry.number}}</em>, {%- endcapture -%}
          {%- else -%}
            {%- capture entrytype -%}{%- endcapture -%}
          {%- endif -%}
          {% if entry.month %}
            {% if entry.month == "may" %}
            {%- capture entrymonth -%}{{ " " }}May{%- endcapture -%}
            {% else %}
              {%- capture entrymonth -%}{{ " " }}{{ entry.month | capitalize }}.{%- endcapture -%}
            {% endif %}
          {% endif %}
          {%- if entry.year -%}
            {%- capture entryyear -%}{{ " " }}{{entry.year}}{%- endcapture -%}
          {%- endif -%}
          {%- capture periodical -%}{{ entrytype }}{{ entrymonth }}{{ entryyear }}{%- endcapture -%}
          <div class="periodical">
            {{ periodical | strip }}
          </div>
        {%- endif %}

          <!-- Links/Buttons -->
          <div class="links align-items-center  btn-group btn-group-sm" role="group">
          {%- if entry.abstract %}
            <a class="abstract fa fa-font btn z-depth-0" title="Show Abstract" role="button"></a>
          {% else %}
            <a class="abstract fa fa-font btn z-depth-0 disabled" title="Show Abstract" role="button"></a>
          {%- endif %}

          {%- if entry.bibtex_show %}
            <a title="Bibtex (Show/hide)" class="bibtex fa fa-book btn z-depth-0" role="button"></a>
          {% else %}
            <a title="Bibtex (Show/hide)" class="bibtex fa fa-book btn z-depth-0 disabled" role="button"></a>
          {%- endif %}


          {% if entry.type == "thesis" %}
            {%- if entry.html %}
              <a href="{{ entry.html }}"  title="Online Access" class="ai ai-semantic-scholar btn z-depth-0" role="button"></a>
            {% elsif entry.arxiv %}
              <a href="http://arxiv.org/abs/{{ entry.arxiv }}" class="ai ai-acclaim btn z-depth-0" role="button"></a>
            {% else %}
              <a href="{{ entry.html }}"  title="Not Available Online" class="ai ai-semantic-scholar btn z-depth-0 disabled" role="button"></a>
            {%- endif %}
          {% elsif entry.type == "patent" %}
            {%- if entry.url %}
              <a href="{{ entry.url }}"  title="Online Access" class="ai ai-semantic-scholar btn z-depth-0" role="button"></a>
            {% elsif entry.arxiv %}
              <a href="http://arxiv.org/abs/{{ entry.arxiv }}" class="ai ai-acclaim btn z-depth-0" role="button"></a>
            {% else %}
              <a href="{{ entry.url }}"  title="Not Available Online" class="ai ai-semantic-scholar btn z-depth-0 disabled" role="button"></a>
            {%- endif %}
          {% else %}
            {% if entry.doi %}
              <a href="{{ entry.html }}"  title="DOI" class="ai ai-doi btn z-depth-0" role="button"></a>
            {% elsif entry.arxiv %}
              <a href="http://arxiv.org/abs/{{ entry.arxiv }}" class="ai ai-acclaim btn z-depth-0" role="button"></a>
            {% else %}
              <a href="{{ entry.html }}"  title="DOI not Available" class="ai ai-doi btn z-depth-0 disabled" role="button"></a>
            {% endif %}
          {% endif %}
          {%- if entry.pdf %}
            {% if entry.pdf contains '://' -%}
            <a href="{{ entry.pdf }}" title="Download PDF" class="fa fa-download btn z-depth-0" role="button"></a>
            {%- else -%}
            <a href="{{ entry.pdf | prepend: '/assets/pdf/publications/' | relative_url }}" title="Download PDF" class="fa fa-download btn z-depth-0" role="button"></a>
            {%- endif %}
          {%- else -%}
            <a href="{{ entry.pdf }}" title="PDF not Available" class="fa fa-download btn z-depth-0 disabled" role="button"></a>
          {%- endif %}
          {%- if entry.supp %}
            {% if entry.supp contains '://' -%}
            <a href="{{ entry.supp }}" class="btn z-depth-0" role="button">Supp</a>
            {%- else -%}
            <a href="{{ entry.supp | prepend: '/assets/pdf/' | relative_url }}" class="btn z-depth-0" role="button">Supp</a>
            {%- endif %}
          {%- endif %}
          {%- if entry.blog %}
            <a href="{{ entry.blog }}" class="btn z-depth-0" role="button">Blog</a>
          {%- endif %}
          {%- if entry.code %}
            <a href="{{ entry.code }}" title="GitHub Repository" class="fab fa-github btn z-depth-0" role="button"></a>
          {%- else -%}
            <a href="{{ entry.code }}" title="Code not Available" class="fab fa-github btn z-depth-0 disabled" role="button"></a>
          {%- endif %}
          {%- if entry.poster %}
            {% if entry.poster contains '://' -%}
            <a href="{{ entry.poster }}" class="btn z-depth-0" role="button">Poster</a>
            {%- else -%}
            <a href="{{ entry.poster | prepend: '/assets/pdf/' | relative_url }}" class="btn z-depth-0" role="button">Poster</a>
            {%- endif %}
          {%- endif %}
          {%- if entry.slides %}
            {% if entry.slides contains '://' -%}
            <a href="{{ entry.slides }}" class="btn z-depth-0" role="button">Slides</a>
            {%- else -%}
            <a href="{{ entry.slides | prepend: '/assets/pdf/' | relative_url }}" class="btn z-depth-0" role="button">Slides</a>
            {%- endif %}
          {%- endif %}
          {%- if entry.website %}
            <a href="{{ entry.website }}" class="btn z-depth-0" role="button">Website</a>
          {%- endif %}
          {% if entry.highlight %}
            <strong class="new-strong">{{ entry.highlight }}</strong>
          {% endif %}
          </div>

          {% if entry.abstract -%}
          <!-- Hidden abstract block -->
          <div class="abstract hidden">
            <p>{{ entry.abstract }}</p>
          </div>
          {%- endif -%}

          {% if entry.bibtex_show -%}
          <!-- Hidden bibtex block -->
          <div class="bibtex hidden">
            {% highlight bibtex %}{{ entry.bibtex | hideCustomBibtex }}{% endhighlight %}
          </div>
          {%- endif %}
        </div>
      </div>
